<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="description" content="Sometimes, it is necessary to view the desktop interface of a Raspberry Pi (RPi) from a remote location or without an attached keyboard and monitor. Both VNC and RDP are available to help. VNC and RDP are client-server remote desktop protocols.">
<meta name="keywords" content="rpi, guide, vnc, rdp, desktop">
<meta name="author" content="Gary Dalton">
<title>Connect to the Raspberry Pi using VNC or RDP</title>
<link rel="stylesheet" href="stylesheets/github.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Connect to the Raspberry Pi using VNC or RDP</h1>
<div class="details">
<span id="author" class="author">Gary Dalton</span><br>
<span id="email" class="email"><a href="https://github.com/gary-dalton" class="bare">https://github.com/gary-dalton</a></span><br>
<span id="revnumber">version 1.0,</span>
<span id="revdate">23 February 2017</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_parts_list">Parts List</a></li>
<li><a href="#_overview">Overview</a></li>
<li><a href="#_write_the_image">Write the image</a></li>
<li><a href="#_connect_pi_to_your_internet">Connect Pi to your Internet</a></li>
<li><a href="#_choose_vnc_or_rdp">Choose VNC or RDP</a></li>
<li><a href="#_enable_realvnc">Enable RealVNC</a>
<ul class="sectlevel2">
<li><a href="#_from_the_desktop">From the Desktop</a></li>
<li><a href="#_from_the_command_line">From the Command Line</a></li>
<li><a href="#_firewall_and_security">Firewall and Security</a></li>
</ul>
</li>
<li><a href="#_connect_to_vnc">Connect to VNC</a></li>
<li><a href="#_rdp">RDP</a>
<ul class="sectlevel2">
<li><a href="#_remove_realvnc">Remove RealVNC</a></li>
<li><a href="#_installing_rdp">Installing RDP</a></li>
<li><a href="#_the_xrdp_service">The xrdp service</a></li>
<li><a href="#_connecting_from_windows">Connecting from Windows</a></li>
</ul>
</li>
<li><a href="#_conclusion">Conclusion</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="index.html">Raspberry Pi Projects</a> | <a href="https://gary-dalton.github.io/">Home</a></p>
</div>
<div class="paragraph">
<p>Sometimes, it is necessary to view the desktop interface of a Raspberry Pi (RPi) from a remote location or without an attached keyboard and monitor. Both VNC and RDP are available to help. VNC and RDP are client-server remote desktop protocols.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/gary-dalton/RaspberryPi-projects/tree/gh-pages">View on GitHub <span class="image"><img src="images/GitHub-Mark-32px.png" alt="GitHub Mark 32px"></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parts_list">Parts List</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Installed network connected Raspberry Pi</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start with a Raspberry Pi image. This is an image saved after following the [RPi Initial Setup Guide](rpi_initial_setup.html). This must be a full desktop image.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_write_the_image">Write the image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Write the image to the MicroSD as described in the <a href="rpi_initial_setup.html">RPi Initial Setup Guide</a>. Insert the MicroSD into the Pi and boot.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connect_pi_to_your_internet">Connect Pi to your Internet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use an Ethernet cable to connect the pi to the network. DHCP will assign the pi an IP address. Find the address of your pi from your network&#8217;s DHCP server.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SSH to the pi at that IP address or yourpiname.local</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_choose_vnc_or_rdp">Choose VNC or RDP</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Versions of Raspian newer than September 2016 come with the PIXEL desktop. These versions have RealVNC preinstalled. It is recommended to use RealVNC.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are benefits and drawbacks to each protocol. RDP is faster but is mostly available from Windows. VNC is universal but may have lower security. Some other opinions from <a href="https://blog.codinghorror.com/vnc-vs-remote-desktop/">Coding Horror</a> and <a href="http://www.thetechvoid.com/rdp-vs-vnc-which-is-better-for-your-needs/">TheTechVoid</a>.</p>
</div>
<div class="paragraph">
<p>Generally, use the preinstalled version of RealVNC. It is possible to switch to RDP but this requires uninstalling RealVNC.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enable_realvnc">Enable RealVNC</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.realvnc.com/docs/raspberry-pi.html" class="bare">https://www.realvnc.com/docs/raspberry-pi.html</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>RealVNC is already installed on your pi, it just needs to be enabled to start on boot. RealVNC is also more secure than many VNC implementations.</p>
</div>
<div class="sect2">
<h3 id="_from_the_desktop">From the Desktop</h3>
<div class="paragraph">
<p>Navigate the menu system, <em>Menu &gt; Preferences &gt; Raspberry Pi Configuration &gt; Interfaces</em> to enable VNC.</p>
</div>
</div>
<div class="sect2">
<h3 id="_from_the_command_line">From the Command Line</h3>
<div class="ulist">
<ul>
<li>
<p><code>sudo raspi-config</code></p>
</li>
<li>
<p>Navigate to <em>Advanced Options &gt; VNC</em> and select Yes</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_firewall_and_security">Firewall and Security</h3>
<div class="paragraph">
<p>If you are using the iptables firewall, see [RPi iptables](rpi_iptables.html), make certain the port is open.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code># Allows RealVNC connections. Uncomment this to allow VNC. Again, this is
# best restricted to certain IPs
#-A INPUT -p tcp -m state --state NEW --dport 5901 -j ACCEPT</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>NOTE: VNC may open a security vulnerability. Permit access to vnc servers on the local network only.</strong></p>
</div>
<div class="paragraph">
<p>If you feel you need to run an Internet accessible VNC Server, at a minimum, use SSH tunneling for all connections. Also view <a href="https://help.ubuntu.com/community/VNC" class="bare">https://help.ubuntu.com/community/VNC</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connect_to_vnc">Connect to VNC</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Download and install the VNC viewer for your system from <a href="https://www.realvnc.com/download/viewer/" class="bare">https://www.realvnc.com/download/viewer/</a>. If you have a pi, the viewer is already installed.</p>
</div>
<div class="paragraph">
<p>If you notice screen resolution issues or other problems, please see <a href="https://support.realvnc.com/Knowledgebase/Article/View/523/2/troubleshooting-vnc-server-on-the-raspberry-pi" class="bare">https://support.realvnc.com/Knowledgebase/Article/View/523/2/troubleshooting-vnc-server-on-the-raspberry-pi</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rdp">RDP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using RDP now, unfortunately, means first uninstalling RealVNC.</p>
</div>
<div class="sect2">
<h3 id="_remove_realvnc">Remove RealVNC</h3>
<div class="ulist">
<ul>
<li>
<p><code>sudo apt-get purge realvnc-vnc-server</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installing_rdp">Installing RDP</h3>
<div class="paragraph">
<p>Installation is a breeze.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update your sources, <code>sudo apt-get update</code></p>
</li>
<li>
<p>Install, <code>sudo apt-get install xrdp</code></p>
</li>
<li>
<p>At this point RDP is ready to use on the pi</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are using the iptables firewall, see [RPi iptables](rpi_iptables.html), make certain the port is open.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code># Allows RDP connections. Uncomment this to allow RDP.
-A INPUT -p tcp -m state --state NEW --dport 3389 -j ACCEPT</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_xrdp_service">The xrdp service</h3>
<div class="paragraph">
<p>xrdp installs itself as a running service which may be controlled via the following commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sudo service xrdp status</code></p>
</li>
<li>
<p><code>sudo service xrdp start</code></p>
</li>
<li>
<p><code>sudo service xrdp stop</code></p>
</li>
<li>
<p><code>sudo service xrdp restart</code></p>
</li>
<li>
<p>Disable xrdp from starting at boot, <code>sudo update-rc.d xrdp disable</code></p>
</li>
<li>
<p>Enable xrdp to start at boot, <code>sudo update-rc.d xrdp enable</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_connecting_from_windows">Connecting from Windows</h3>
<div class="paragraph">
<p>An RDP client is a built-in feature of Windows. Just launch the client and enter the connection settings. Connection settings may be saved for easier reconnection. There are also some advanced options available.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Windows-key r</code></p>
</li>
<li>
<p>Enter <code>mstsc</code></p>
</li>
<li>
<p>Connect to your pi</p>
</li>
<li>
<p>Enter your pi&#8217;s login credentials</p>
</li>
<li>
<p>Shortly, you will see the desktop of your pi</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>When done with the session, just close the window.</strong></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Viewing your desktop remotely is cool but remember, this may reduce security. VNC especially, should not be used unprotected over the Internet.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0<br>
Last updated 2017-02-23 09:04:55 Central Standard Time
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>